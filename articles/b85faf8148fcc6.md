---
title: "Kubernetesã«ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®Helm Chartä½œæˆæ‰‹é †ã¾ã¨ã‚"
emoji: "ğŸ•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---

æœ¬è¨˜äº‹ã¯ã€KubernetesãŠã‚ˆã³Helmã‚’åˆã‚ã¦è§¦ã‚‹æ–¹å‘ã‘ã«ã€æœ€å°é™ã®æ§‹æˆã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ‰‹é †ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚

# ã¯ã˜ã‚ã«
Kubernetesï¼ˆK8sï¼‰ã¯ã€ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é‹ç”¨ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã—ã‹ã—ã€ãã®é‹ç”¨ã«ã¯å¤šãã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆï¼‰ã‚’æ›¸ãå¿…è¦ãŒã‚ã‚Šã€åˆè¦‹ã§ã¯ã€ç†è§£ã™ã‚‹ã®ãŒå¤§å¤‰å›°é›£ã§ã™ã€‚ç§ã‚‚ç¾è·ã§åˆã‚ã¦K8sã«è§¦ã‚Œã¦ãŠã‚Šã€æœ€åˆã¯ç†è§£ã«è‹¦ã—ã¿ã¾ã—ãŸã€‚

ã¾ãŸã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å†åˆ©ç”¨æ€§ã‚’è€ƒæ…®ã—ãŸã¨ãã«ã€HelmãŒå½¹ã«ç«‹ã¡ã¾ã™ã€‚Helmã¯ã€ŒKubernetesã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã€ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ãŒã€å®Ÿéš›ã«ã¯ã€Œè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–ã—ã€ç’°å¢ƒã”ã¨ã«æŸ”è»Ÿã«å¤‰åŒ–ã•ã›ã¦ä½¿ãˆã‚‹ä»•çµ„ã¿ã€ã‚’æä¾›ã™ã‚‹å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

# Kubernetesã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã¨ã¯
Kubernetesã«ãŠã‘ã‚‹ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆï¼ˆmanifestï¼‰ã¨ã¯ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã«å¯¾ã—ã¦ã€Œã©ã†ã„ã†æ§‹æˆã§ã€ã©ã®ã‚ˆã†ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã—ãŸã„ã®ã‹ã€ã‚’ä¼ãˆã‚‹ãŸã‚ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ã“ã¨ã§ã™ã€‚
åŸºæœ¬çš„ã« YAMLå½¢å¼ã§è¨˜è¿°ã•ã‚Œã€Kubernetesã®ãƒªã‚½ãƒ¼ã‚¹ï¼ˆPod, Deployment, Service ãªã©ï¼‰ã‚’å®£è¨€çš„ã«å®šç¾©ã—ã¾ã™ã€‚

## Deploymentã®æœ€å°æ§‹æˆ

```yaml:deployment.yaml
# deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
spec:
  replicas: 1
  selector:
    matchLabels:
      app: my-app
  template:
    metadata:
      labels:
        app: my-app
    spec:
      containers:
        - name: my-app
          image: nginx:latest
          ports:
            - containerPort: 80
```


```bash
$ kubectl apply -f deployment.yaml
```

## Serviceã®æœ€å°æ§‹æˆ
```yaml:service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-app
spec:
  selector:
    app: my-app
  ports:
    - port: 80
      targetPort: 80
  type: NodePort
```

```bash
$ kubectl apply -f service.yaml
```
## Ingressã®æœ€å°æ§‹æˆ

```yaml:ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-app-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  rules:
    - host: myapp.local
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: my-app
                port:
                  number: 80
```

```bash
$ kubectl apply -f ingress.yaml
```

## å‹•ä½œç¢ºèª
```bash
kubectl get pods
kubectl get svc
```

# Helmã¨ã¯
Helmã¯ã€Kubernetesç”¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã™ã€‚
Helmã¯ kubectl apply ã§ã¯ç…©é›‘ã«ãªã‚ŠãŒã¡ãªè¤‡æ•°ãƒªã‚½ãƒ¼ã‚¹ã®ç®¡ç†ã‚’1ã¤ã®å˜ä½ã¨ã—ã¦æ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

# Helm Chartã¨ã¯
Helm Chart ã¯ã€Helmã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Kubernetesã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®**ã€Œã²ã¨ã¾ã¨ã¾ã‚Šã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã€**ã§ã™ã€‚
Chart ã¯ã–ã£ãã‚Šè¨€ãˆã°ã€ŒKubernetesãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã€ã¨ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«æ§‹æˆã•ã‚Œã¾ã™ï¼š

# minikubeä¸Šã§ç¢ºèª
ã“ã“ã¾ã§ã§ã€Kubernetesã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨ã€Helmã¨Helm Chartã®åŸºæœ¬æ§‹é€ ã«ã¤ã„ã¦å­¦ã‚“ã§ãã¾ã—ãŸã€‚
ã„ã‚ˆã„ã‚ˆã€ä½œæˆã—ãŸHelm Chartã‚’ä½¿ã£ã¦ ãƒ­ãƒ¼ã‚«ãƒ«ã®minikubeã‚¯ãƒ©ã‚¹ã‚¿ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

# ã¾ã¨ã‚
