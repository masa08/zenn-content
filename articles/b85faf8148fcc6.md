---
title: "Kubernetes„Å®Helm„ÅÆÂü∫Êú¨„Åã„ÇâÂßã„ÇÅ„ÇãÊúÄÂ∞èÊßãÊàê„Éá„Éó„É≠„Ç§„Ç¨„Ç§„Éâ"
emoji: "üêï"
type: "tech" # tech: ÊäÄË°ìË®ò‰∫ã / idea: „Ç¢„Ç§„Éá„Ç¢
topics: ["kubernetes"]
published: false
---

# „ÅØ„Åò„ÇÅ„Å´

Êú¨Ë®ò‰∫ã„ÅØ„ÄÅKubernetes„Å®Helm„Å´Âàù„ÇÅ„Å¶Ëß¶„Çå„ÇãÊñπ„Å´Âêë„Åë„Å¶„ÄÅ„Åß„Åç„Çã„Å†„Åë„Çè„Åã„Çä„ÇÑ„Åô„Åè„ÄÅÊúÄÂ∞èÊßãÊàê„Åß„Ç¢„Éó„É™„Çí„Éá„Éó„É≠„Ç§„Åô„ÇãÊâãÈ†Ü„ÇíÁ¥π‰ªã„Åô„Çã„ÇÇ„ÅÆ„Åß„Åô„ÄÇ
Á≠ÜËÄÖËá™Ë∫´„ÄÅÁèæÂú®„ÅÆËÅ∑Â†¥„ÅßKubernetes„ÇÑHelm„ÇíÂàù„ÇÅ„Å¶Ëß¶„Çå„ÅüÈöõ„ÄÅÊúÄÂàù„ÅÆÁêÜËß£„Å´ÈùûÂ∏∏„Å´Ëã¶Âä¥„Åó„Åæ„Åó„Åü„ÄÇ„Åì„ÅÆË®ò‰∫ã„ÅØ„ÄÅ„Åù„ÅÆ„Å®„Åç„ÅÆ„Äå„Å©„Åì„Åß„Å§„Åæ„Åö„ÅÑ„Åü„Åã„Äç„Äå„Å©„ÅÜ„Åô„Çå„Å∞ÁêÜËß£„ÅåÈÄ≤„Çì„Å†„Åã„Äç„Çí„Éô„Éº„Çπ„Å´„ÄÅÂêå„Åò„Çà„ÅÜ„Å´ÊÇ©„ÇÄÊñπ„ÅÆÂä©„Åë„Å´„Å™„Çå„Å∞„Å®„ÅÑ„ÅÜÊÄù„ÅÑ„Å®„ÄÅËá™ÂàÜ„ÅÆÂÇôÂøòÈå≤„ÅÆÊÑèÂë≥„ÇÇËæº„ÇÅ„Å¶Êõ∏„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇ

# Kubernetes„ÄÄ
Kubernetes„ÅØ„ÄÅ„Ç≥„É≥„ÉÜ„ÉäÂåñ„Åï„Çå„Åü„ÉØ„Éº„ÇØ„É≠„Éº„Éâ„ÇÑ„Çµ„Éº„Éì„Çπ„Çí„ÄÅÂÆ£Ë®ÄÁöÑ„Å™Ë®≠ÂÆö„ÇÑËá™ÂãïÂåñ„ÇíÁî®„ÅÑ„Å™„Åå„Çâ„ÄÅÁÆ°ÁêÜ„Åô„Çã„Åü„ÇÅ„ÅÆ„ÄÅ„Éù„Éº„Çø„Éñ„É´„ÅßÊã°ÂºµÂèØËÉΩ„Å™„Ç™„Éº„Éó„É≥„ÇΩ„Éº„Çπ„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Åß„Åô„ÄÇÂÖ¨Âºè„Çµ„Ç§„Éà„Åß„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÂÆöÁæ©„Åå„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ

> Kubernetes is a portable, extensible, open source platform for managing containerized workloads and services, that facilitates both declarative configuration and automation. It has a large, rapidly growing ecosystem. Kubernetes services, support, and tools are widely available.

https://kubernetes.io/docs/concepts/overview/

Kubernetes„ÅØ„ÄÅ„Ç≥„É≥„ÉÜ„Éä„ÅÆËµ∑Âãï„ÇÑÂÅúÊ≠¢„Å†„Åë„Åß„Å™„Åè„ÄÅÂøÖË¶Å„Å´Âøú„Åò„Åü„Çπ„Ç±„Éº„É™„É≥„Ç∞ÔºàPod„ÅÆÂ¢óÊ∏õÔºâ„ÇÑÈöúÂÆ≥Áô∫ÁîüÊôÇ„ÅÆ„Éï„Çß„Ç§„É´„Ç™„Éº„Éê„Éº„ÇÇËá™ÂãïÁöÑ„Å´Ë°å„Å£„Å¶„Åè„Çå„Çã„Åü„ÇÅ„ÄÅÂÆâÂÆö„Åó„ÅüÈÅãÁî®„Å®ÂäπÁéáÁöÑ„Å™„É™„ÇΩ„Éº„ÇπÁÆ°ÁêÜ„ÇíÂÆüÁèæ„Åß„Åç„Åæ„Åô„ÄÇ

Kubernetes„ÅÆÁêÜËß£„ÇíÊ∑±„ÇÅ„Çã„ÅÜ„Åà„Åß„ÅØ„ÄÅ„Ç≥„É≥„ÉÜ„Éä„ÅÆÂü∫Êú¨„ÇíÊäº„Åï„Åà„Å¶„Åä„Åè„Å®ÁêÜËß£„Åå„Çπ„É†„Éº„Ç∫„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Ç≥„É≥„ÉÜ„Éä„ÅØ„ÄÅ‰ªÆÊÉ≥ÂåñÊäÄË°ì„ÅÆ‰∏Ä„Å§„Åß„ÄÅ„Ç≥„Éº„Éâ„ÇÑ„Åù„ÅÆ‰æùÂ≠òÈñ¢‰øÇ„ÄÅ„É©„É≥„Çø„Ç§„É†„Å™„Å©„Çí„Éë„ÉÉ„Ç±„Éº„Ç∏„Å´„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Çí„Å©„ÅÆÁí∞Â¢É„Åß„ÇÇÂêå„Åò„Çà„ÅÜ„Å´Âãï‰Ωú„Åï„Åõ„Çã„Åì„Å®„ÅåÂèØËÉΩ„Å´„Å™„Çä„Åæ„Åô„ÄÇKubernetes„ÅØ„ÄÅ„Åì„ÅÜ„Åó„Åü„Ç≥„É≥„ÉÜ„Éä„ÇíÂäπÁéáÁöÑ„Åã„Å§ÂÆâÂÆöÁöÑ„Å´ÈÅãÁî®„Åô„Çã„Åü„ÇÅ„ÅÆ„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Åß„Åô„ÄÇ

‰ª•‰∏ã„Å´ÂÖ¨Âºè„Çµ„Ç§„Éà„ÅÆ„É™„É≥„ÇØ„ÇíË≤º„Å£„Å¶„Åä„Åç„Åæ„Åô„Åå„ÄÅ„Éç„ÉÉ„Éà‰∏ä„Å´ÂÖà‰∫∫„ÅÆÊñπ„ÅåÊõ∏„ÅÑ„ÅüËß£Ë™¨Ë®ò‰∫ã„Å™„Å©„ÇÇÂ§öÊï∞„ÅÇ„Çã„ÅÆ„Åß„ÄÅ„Åù„Å°„Çâ„ÇíË™ø„Åπ„Å¶„Åø„Å¶„ÇÇËâØ„ÅÑ„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÄÇ‰ªäÂõû„ÅÆË®ò‰∫ã„Åß„ÅØ„ÄÅKubernetes„Å®Helm„ÅÆ„Éá„Éó„É≠„Ç§Âë®„Çä„Å´ÁÑ¶ÁÇπ„ÇíÂΩì„Å¶„Åü„ÅÑ„ÅÆ„Åß„ÄÅË™¨Êòé„ÅØÁúÅ„Åç„Åæ„Åô„ÄÇ

https://www.docker.com/ja-jp/resources/what-container/

# Kubernetes Objects

Kubernetes„Åß„ÅØ„ÄÅ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆÁä∂ÊÖã„Çí„Äå„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Äç„Å®„Åó„Å¶ÂÆ£Ë®Ä„Åó„ÄÅ„Åù„Çå„Å´Âü∫„Å•„ÅÑ„Å¶„Ç∑„Çπ„ÉÜ„É†ÂÖ®‰Ωì„ÅåËá™ÂãïÁöÑ„Å´ÁÆ°ÁêÜ„ÉªË™øÊï¥„Åï„Çå„Åæ„Åô„ÄÇ
„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅØ„Åô„Åπ„Å¶YAMLÔºà„Åæ„Åü„ÅØJSONÔºâÂΩ¢Âºè„ÅÆ„Éû„Éã„Éï„Çß„Çπ„Éà„Éï„Ç°„Ç§„É´„ÅßÂÆöÁæ©„Åï„Çå„ÄÅkubectl „ÇÑ API ÁµåÁî±„ÅßKubernetes„Å´ÈÅ©Áî®„Åï„Çå„Åæ„Åô„ÄÇ

> Kubernetes objects are persistent entities in the Kubernetes system. Kubernetes uses these entities to represent the state of your cluster.

https://kubernetes.io/docs/concepts/overview/working-with-objects/

‰ª•‰∏ã„Åå‰∏ªË¶Å„Å™„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅÆ‰∏ÄË¶ß„Åß„Åô„ÄÇ

| „Ç™„Éñ„Ç∏„Çß„ÇØ„Éà                 | Ë™¨Êòé                              |
| ---------------------- | ------------------------------- |
| **Pod**                | „Ç≥„É≥„ÉÜ„Éä„ÇíÂÆüË°å„Åô„ÇãÊúÄÂ∞èÂçò‰ΩçÔºàÈÄöÂ∏∏„ÅØ1„Ç≥„É≥„ÉÜ„ÉäÔºâ         |
| **Deployment**         | Ë§áÊï∞„ÅÆPod„Çí‰∏ÄË≤´„Åó„Å¶ÁÆ°ÁêÜ„Éª„Çπ„Ç±„Éº„É™„É≥„Ç∞„ÉªÊõ¥Êñ∞         |
| **ReplicaSet**         | Deployment„ÅåÂÜÖÈÉ®„Åß‰Ωø„ÅÜ„ÄÅPod„ÅÆ„É¨„Éó„É™„Ç´Á∂≠ÊåÅÊ©üÊßã   |
| **Service**            | Pod„Å´ÂØæ„Åô„Çã„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÇíÊèê‰æõ            |
| **Ingress**            | Â§ñÈÉ®„ÅÆHTTP„É™„ÇØ„Ç®„Çπ„Éà„Çí„ÄÅÂÜÖÈÉ®„ÅÆService„Å∏„É´„Éº„ÉÜ„Ç£„É≥„Ç∞ |
| **ConfigMap / Secret** | „Ç¢„Éó„É™„ÅÆË®≠ÂÆöÂÄ§„ÇÑÊ©üÂØÜÊÉÖÂ†±„ÇíPod„Å´Ê∏°„Åô‰ªïÁµÑ„Åø          |

„Åì„Çå„Çâ„ÅÆ„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Çí„Å©„ÅÆ„Çà„ÅÜ„Å´Ë®òËø∞„Åó„ÄÅÈÅ©Áî®„Åó„Å¶„ÅÑ„Åè„Åã„ÅØ„ÄÅÊ¨°„ÅÆÁ´†„ÅßÁ¥π‰ªã„Åô„Çã„Äå„Éû„Éã„Éï„Çß„Çπ„Éà„Éï„Ç°„Ç§„É´„Äç„ÅÆÊßãÈÄ†„Å®„ÅÇ„Çè„Åõ„Å¶ÂÖ∑‰ΩìÁöÑ„Å´Ë¶ã„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ

# manifest „Éï„Ç°„Ç§„É´
„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÇíÂÆöÁæ©„Åô„Çã„Åü„ÇÅ„Å´„ÄÅmanifest„ÇíÂà©Áî®„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ„Åì„Çå„ÅØ„ÄÅ„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅÆÁä∂ÊÖã„Çí„ÄÅJSONÂΩ¢Âºè„ÅßË°®Áèæ„Åó„ÄÅ„Åì„ÅÆÊÉÖÂ†±„Çíkubectl„Ç≥„Éû„É≥„ÉâÁµåÁî±„ÅßKubernetes„Å´Ê∏°„Åô„Åì„Å®„Åß„ÄÅ„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅÆÁîüÊàê„ÅåÂèØËÉΩ„Å´„Å™„Çä„Åæ„Åô„ÄÇ

> When you use the Kubernetes API to create the object (either directly or via kubectl), that API request must include that information as JSON in the request body. Most often, you provide the information to kubectl in a file known as a manifest.

> In the manifest (YAML or JSON file) for the Kubernetes object you want to create, you'll need to set values for the following fields:

„Éû„Éã„Éï„Çß„Çπ„Éà„Éï„Ç°„Ç§„É´„Åß„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆË¶ÅÁ¥†„Åårequired fields„Å®„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ

apiVersion - Which version of the Kubernetes API you're using to create this object
kind - What kind of object you want to create
metadata - Data that helps uniquely identify the object, including a name string, UID, and optional namespace
spec - What state you desire for the object

„Åì„Åì„Åã„Çâ„ÄÅÊúÄÂ∞èÈôê„ÅÆ„Éá„Éó„É≠„Ç§„Å´ÂøÖË¶Å„Å™„ÄÅ„ÅÑ„Åè„Å§„Åã„ÅÆ„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Å´„Å§„ÅÑ„Å¶Ë¶ã„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ

## Deployment

Deployment „ÅØ„ÄÅReplicaSet „ÅÆÁÆ°ÁêÜ„ÇíÂê´„ÇÅ„Åü„ÄÅ„Ç¢„Éó„É™„ÅÆ„É≠„Éº„É™„É≥„Ç∞Êõ¥Êñ∞„ÇÑ„Éê„Éº„Ç∏„Éß„É≥ÁÆ°ÁêÜ„ÇíÂèØËÉΩ„Å´„Åô„Çã„Ç≥„É≥„Éà„É≠„Éº„É©„Éº„Åß„Åô„ÄÇ

> A Deployment manages a set of Pods to run an application workload, usually one that doesn't maintain state.

```yaml:deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80
```


```bash
$ kubectl apply -f deployment.yaml
```

## Service

Service„Å®„ÅØ„ÄÅ„ÇØ„É©„Çπ„ÇøÂÜÖ„ÅÆPod„Å´ÂÆâÂÆö„Åó„Åü„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Ç¢„ÇØ„Çª„Çπ„ÇíÊèê‰æõ„Åô„Çã„Åü„ÇÅ„ÅÆ„Ç®„É≥„Éâ„Éù„Ç§„É≥„Éà„ÄÇ

> Expose an application running in your cluster behind a single outward-facing endpoint, even when the workload is split across multiple backends.

```yaml:service.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80
```

```bash
$ kubectl apply -f service.yaml
```
## Ingress

Â§ñÈÉ®„Åã„Çâ„ÅÆHTTP„É™„ÇØ„Ç®„Çπ„Éà„Çí„ÄÅ„É´„Éº„É´„Å´Âü∫„Å•„ÅÑ„Å¶Service„Å∏„É´„Éº„ÉÜ„Ç£„É≥„Ç∞„Åô„Çã‰ªïÁµÑ„Åø„ÄÇ

> Make your HTTP (or HTTPS) network service available using a protocol-aware configuration mechanism, that understands web concepts like URIs, hostnames, paths, and more. The Ingress concept lets you map traffic to different backends based on rules you define via the Kubernetes API.

```yaml:ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: minimal-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  ingressClassName: nginx-example
  rules:
  - http:
      paths:
      - path: /testpath
        pathType: Prefix
        backend:
          service:
            name: test
            port:
              number: 80
```

```bash
$ kubectl apply -f ingress.yaml
```

‚Äª Gateway API „Å´„Åµ„Çå„Çã
https://kubernetes.io/docs/concepts/services-networking/gateway/

# Helm

> Helm helps you manage Kubernetes applications ‚Äî Helm Charts help you define, install, and upgrade even the most complex Kubernetes application.

# Helm Chart

> A Chart is a Helm package. It contains all of the resource definitions necessary to run an application, tool, or service inside of a Kubernetes cluster. Think of it like the Kubernetes equivalent of a Homebrew formula, an Apt dpkg, or a Yum RPM file.

# minikube‰∏ä„Åß„ÄÅ„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Çí‰ΩúÊàê„Åô„Çã

> minikube quickly sets up a local Kubernetes cluster on macOS, Linux, and Windows. We proudly focus on helping application developers and new Kubernetes users.

https://minikube.sigs.k8s.io/docs/

# „Åæ„Å®„ÇÅ
